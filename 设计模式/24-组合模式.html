<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组合模式 | JAVA设计模式</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="JAVA设计模式">
    
    <link rel="preload" href="/design-pattern/assets/css/0.styles.5341db10.css" as="style"><link rel="preload" href="/design-pattern/assets/js/app.8c81fd22.js" as="script"><link rel="preload" href="/design-pattern/assets/js/2.dd66b6b4.js" as="script"><link rel="preload" href="/design-pattern/assets/js/7.83b1ace1.js" as="script"><link rel="prefetch" href="/design-pattern/assets/js/10.098a7b99.js"><link rel="prefetch" href="/design-pattern/assets/js/11.eb4db8f8.js"><link rel="prefetch" href="/design-pattern/assets/js/12.bf4d3ad2.js"><link rel="prefetch" href="/design-pattern/assets/js/13.8ff57c96.js"><link rel="prefetch" href="/design-pattern/assets/js/14.76b51d7f.js"><link rel="prefetch" href="/design-pattern/assets/js/15.9347011e.js"><link rel="prefetch" href="/design-pattern/assets/js/16.43d37bc5.js"><link rel="prefetch" href="/design-pattern/assets/js/17.1811b063.js"><link rel="prefetch" href="/design-pattern/assets/js/18.1aa6e2eb.js"><link rel="prefetch" href="/design-pattern/assets/js/19.f81d80a3.js"><link rel="prefetch" href="/design-pattern/assets/js/20.bf9a0a73.js"><link rel="prefetch" href="/design-pattern/assets/js/21.71c1b336.js"><link rel="prefetch" href="/design-pattern/assets/js/22.cdc55547.js"><link rel="prefetch" href="/design-pattern/assets/js/23.f5f36a02.js"><link rel="prefetch" href="/design-pattern/assets/js/24.fd34eb0c.js"><link rel="prefetch" href="/design-pattern/assets/js/25.34b459ef.js"><link rel="prefetch" href="/design-pattern/assets/js/26.071fbf97.js"><link rel="prefetch" href="/design-pattern/assets/js/27.1cb46275.js"><link rel="prefetch" href="/design-pattern/assets/js/28.67d31eb8.js"><link rel="prefetch" href="/design-pattern/assets/js/29.9c486a8c.js"><link rel="prefetch" href="/design-pattern/assets/js/3.704ac8ee.js"><link rel="prefetch" href="/design-pattern/assets/js/30.c1e53709.js"><link rel="prefetch" href="/design-pattern/assets/js/31.a53c8f9e.js"><link rel="prefetch" href="/design-pattern/assets/js/32.cd9a54d0.js"><link rel="prefetch" href="/design-pattern/assets/js/33.2ce3d5d8.js"><link rel="prefetch" href="/design-pattern/assets/js/34.3b19cf57.js"><link rel="prefetch" href="/design-pattern/assets/js/35.509552a3.js"><link rel="prefetch" href="/design-pattern/assets/js/36.b30e594a.js"><link rel="prefetch" href="/design-pattern/assets/js/37.139a7bc2.js"><link rel="prefetch" href="/design-pattern/assets/js/38.349560b7.js"><link rel="prefetch" href="/design-pattern/assets/js/39.cf38eb6d.js"><link rel="prefetch" href="/design-pattern/assets/js/4.81f7c0d7.js"><link rel="prefetch" href="/design-pattern/assets/js/40.8c739569.js"><link rel="prefetch" href="/design-pattern/assets/js/41.cce319e5.js"><link rel="prefetch" href="/design-pattern/assets/js/42.08d47c62.js"><link rel="prefetch" href="/design-pattern/assets/js/43.cffeb0b4.js"><link rel="prefetch" href="/design-pattern/assets/js/44.4ff9ee68.js"><link rel="prefetch" href="/design-pattern/assets/js/45.f970681e.js"><link rel="prefetch" href="/design-pattern/assets/js/46.2b6dc672.js"><link rel="prefetch" href="/design-pattern/assets/js/47.51bcccb8.js"><link rel="prefetch" href="/design-pattern/assets/js/48.a9a64665.js"><link rel="prefetch" href="/design-pattern/assets/js/49.56e52fda.js"><link rel="prefetch" href="/design-pattern/assets/js/5.fd302c7b.js"><link rel="prefetch" href="/design-pattern/assets/js/50.53c50f3d.js"><link rel="prefetch" href="/design-pattern/assets/js/51.adc449e1.js"><link rel="prefetch" href="/design-pattern/assets/js/52.0dfae4a5.js"><link rel="prefetch" href="/design-pattern/assets/js/53.527c0298.js"><link rel="prefetch" href="/design-pattern/assets/js/54.5e310ac1.js"><link rel="prefetch" href="/design-pattern/assets/js/6.7c457898.js"><link rel="prefetch" href="/design-pattern/assets/js/8.a01dc291.js"><link rel="prefetch" href="/design-pattern/assets/js/9.8de25f38.js">
    <link rel="stylesheet" href="/design-pattern/assets/css/0.styles.5341db10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design-pattern/" class="home-link router-link-active"><!----> <span class="site-name">JAVA设计模式</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design-pattern/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/senjyouhara/design-pattern" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design-pattern/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/senjyouhara/design-pattern" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>设计模式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-pattern/设计模式/0.0-概述.html" class="sidebar-link">软件设计模式概述</a></li><li><a href="/design-pattern/设计模式/0.1-GoF 的 23 种设计模式的分类和功能.html" class="sidebar-link">GoF 的 23 种设计模式的分类和功能</a></li><li><a href="/design-pattern/设计模式/0.2-UML统一建模语言是什么？.html" class="sidebar-link">UML统一建模语言是什么？</a></li><li><a href="/design-pattern/设计模式/0.3-UML类图及类图之间的关系.html" class="sidebar-link">UML类图及类图之间的关系</a></li><li><a href="/design-pattern/设计模式/0.4-类关系记忆技巧.html" class="sidebar-link">类关系记忆技巧</a></li><li><a href="/design-pattern/设计模式/0.5-UMLet的使用与类图的设计.html" class="sidebar-link">UMLet的使用与类图的设计</a></li><li><a href="/design-pattern/设计模式/0.6-什么才是优秀的软件架构？.html" class="sidebar-link">什么才是优秀的软件架构？</a></li><li><a href="/design-pattern/设计模式/0.7-如何正确使用设计模式？.html" class="sidebar-link">如何正确使用设计模式？</a></li><li><a href="/design-pattern/设计模式/1-开闭原则——面向对象设计原则.html" class="sidebar-link">开闭原则——面向对象设计原则</a></li><li><a href="/design-pattern/设计模式/10-单例模式.html" class="sidebar-link">单例模式</a></li><li><a href="/design-pattern/设计模式/11-原型模式.html" class="sidebar-link">原型模式</a></li><li><a href="/design-pattern/设计模式/12-简单工厂模式.html" class="sidebar-link">简单工厂模式</a></li><li><a href="/design-pattern/设计模式/13-工厂方法模式.html" class="sidebar-link">工厂方法模式</a></li><li><a href="/design-pattern/设计模式/14-抽象工厂模式.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/design-pattern/设计模式/15-建造者模式.html" class="sidebar-link">建造者模式</a></li><li><a href="/design-pattern/设计模式/16-创建型模式应用实验.html" class="sidebar-link">创建型模式应用实验</a></li><li><a href="/design-pattern/设计模式/17-结构型模式概述.html" class="sidebar-link">结构型模式概述</a></li><li><a href="/design-pattern/设计模式/18-代理模式.html" class="sidebar-link">代理模式</a></li><li><a href="/design-pattern/设计模式/19-适配器模式.html" class="sidebar-link">适配器模式</a></li><li><a href="/design-pattern/设计模式/2-里氏替换原则——面向对象设计原则.html" class="sidebar-link">里氏替换原则——面向对象设计原则</a></li><li><a href="/design-pattern/设计模式/20-桥接模式.html" class="sidebar-link">桥接模式</a></li><li><a href="/design-pattern/设计模式/21-装饰器模式.html" class="sidebar-link">装饰器模式</a></li><li><a href="/design-pattern/设计模式/22-外观模式.html" class="sidebar-link">外观模式</a></li><li><a href="/design-pattern/设计模式/23-享元模式.html" class="sidebar-link">享元模式</a></li><li><a href="/design-pattern/设计模式/24-组合模式.html" class="active sidebar-link">组合模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-pattern/设计模式/24-组合模式.html#组合模式" class="sidebar-link">组合模式</a></li></ul></li><li><a href="/design-pattern/设计模式/25-结构型模式应用实验.html" class="sidebar-link">结构型模式应用实验</a></li><li><a href="/design-pattern/设计模式/26-行为型模式概述.html" class="sidebar-link">行为型模式概述</a></li><li><a href="/design-pattern/设计模式/27-模板方法模式.html" class="sidebar-link">模板方法模式</a></li><li><a href="/design-pattern/设计模式/28-策略模式.html" class="sidebar-link">策略模式</a></li><li><a href="/design-pattern/设计模式/29-命令模式.html" class="sidebar-link">命令模式</a></li><li><a href="/design-pattern/设计模式/3-依赖倒置原则——面向对象设计原则.html" class="sidebar-link">依赖倒置原则——面向对象设计原则</a></li><li><a href="/design-pattern/设计模式/30-责任链模式.html" class="sidebar-link">责任链模式</a></li><li><a href="/design-pattern/设计模式/31-状态模式.html" class="sidebar-link">状态模式</a></li><li><a href="/design-pattern/设计模式/32-观察者模式.html" class="sidebar-link">观察者模式</a></li><li><a href="/design-pattern/设计模式/33-中介者模式.html" class="sidebar-link">中介者模式</a></li><li><a href="/design-pattern/设计模式/34-迭代器模式.html" class="sidebar-link">迭代器模式</a></li><li><a href="/design-pattern/设计模式/35-访问者模式.html" class="sidebar-link">访问者模式</a></li><li><a href="/design-pattern/设计模式/36-备忘录模式.html" class="sidebar-link">备忘录模式</a></li><li><a href="/design-pattern/设计模式/37-解释器模式.html" class="sidebar-link">解释器模式</a></li><li><a href="/design-pattern/设计模式/38-行为型模式应用实验.html" class="sidebar-link">行为型模式应用实验</a></li><li><a href="/design-pattern/设计模式/39-一句话归纳设计模式.html" class="sidebar-link">一句话归纳设计模式</a></li><li><a href="/design-pattern/设计模式/4-单一职责原则——面向对象设计原则.html" class="sidebar-link">单一职责原则——面向对象设计原则</a></li><li><a href="/design-pattern/设计模式/5-接口隔离原则——面向对象设计原则.html" class="sidebar-link">接口隔离原则——面向对象设计原则</a></li><li><a href="/design-pattern/设计模式/6-迪米特法则——面向对象设计原则.html" class="sidebar-link">迪米特法则——面向对象设计原则</a></li><li><a href="/design-pattern/设计模式/7-合成复用原则——面向对象设计原则.html" class="sidebar-link">合成复用原则——面向对象设计原则</a></li><li><a href="/design-pattern/设计模式/8-一句话总结软件设计七大原则.html" class="sidebar-link">一句话总结软件设计七大原则</a></li><li><a href="/design-pattern/设计模式/9-创建型模式的特点和分类.html" class="sidebar-link">创建型模式的特点和分类</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="组合模式"><a href="#组合模式" class="header-anchor">#</a> 组合模式</h2> <p>在现实生活中，存在很多“部分-整体”的关系，例如，大学中的部门与学院、总公司中的部门与分公司、学习用品中的书与书包、生活用品中的衣服与衣柜、以及厨房中的锅碗瓢盆等。在软件开发中也是这样，例如，文件系统中的文件与文件夹、窗体程序中的简单控件与容器控件等。对这些简单对象与复合对象的处理，如果用组合模式来实现会很方便。</p> <h3 id="组合模式的定义与特点"><a href="#组合模式的定义与特点" class="header-anchor">#</a> 组合模式的定义与特点</h3> <p>组合（Composite Pattern）模式的定义：有时又叫作整体-部分（Part-Whole）模式，它是一种将对象组合成树状的层次结构的模式，用来表示“整体-部分”的关系，使用户对单个对象和组合对象具有一致的访问性，属于结构型设计模式。</p> <p>组合模式一般用来描述整体与部分的关系，它将对象组织到树形结构中，顶层的节点被称为根节点，根节点下面可以包含树枝节点和叶子节点，树枝节点下面又可以包含树枝节点和叶子节点，树形结构图如下。</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>由上图可以看出，其实根节点和树枝节点本质上属于同一种数据类型，可以作为容器使用；而叶子节点与树枝节点在语义上不属于用一种类型。但是在组合模式中，会把树枝节点和叶子节点看作属于同一种数据类型（用统一接口定义），让它们具备一致行为。</p> <p>这样，在组合模式中，整个树形结构中的对象都属于同一种类型，带来的好处就是用户不需要辨别是树枝节点还是叶子节点，可以直接进行操作，给用户的使用带来极大的便利。</p> <p>组合模式的主要优点有：</p> <ul><li>组合模式使得客户端代码可以一致地处理单个对象和组合对象，无须关心自己处理的是单个对象，还是组合对象，这简化了客户端代码；</li> <li>更容易在组合体内加入新的对象，客户端不会因为加入了新的对象而更改源代码，满足“开闭原则”；</li></ul> <p>其主要缺点是：</p> <ul><li>设计较复杂，客户端需要花更多时间理清类之间的层次关系；</li> <li>不容易限制容器中的构件；</li> <li>不容易用继承的方法来增加构件的新功能；</li></ul> <h3 id="组合模式的结构与实现"><a href="#组合模式的结构与实现" class="header-anchor">#</a> 组合模式的结构与实现</h3> <p>组合模式的结构不是很复杂，下面对它的结构和实现进行分析。</p> <h4 id="_1-模式的结构"><a href="#_1-模式的结构" class="header-anchor">#</a> 1. 模式的结构</h4> <p>组合模式包含以下主要角色。</p> <ul><li>抽象构件（Component）角色：它的主要作用是为树叶构件和树枝构件声明公共接口，并实现它们的默认行为。在透明式的组合模式中抽象构件还声明访问和管理子类的接口；在安全式的组合模式中不声明访问和管理子类的接口，管理工作由树枝构件完成。（总的抽象类或接口，定义一些通用的方法，比如新增、删除）</li> <li>树叶构件（Leaf）角色：是组合中的叶节点对象，它没有子节点，用于继承或实现抽象构件。</li> <li>树枝构件（Composite）角色 / 中间构件：是组合中的分支节点对象，它有子节点，用于继承和实现抽象构件。它的主要作用是存储和管理子部件，通常包含 Add()、Remove()、GetChild() 等方法。</li></ul> <p>组合模式分为透明式的组合模式和安全式的组合模式。</p> <h5 id="_1-透明方式"><a href="#_1-透明方式" class="header-anchor">#</a> (1) 透明方式</h5> <p>在该方式中，由于抽象构件声明了所有子类中的全部方法，所以客户端无须区别树叶对象和树枝对象，对客户端来说是透明的。但其缺点是：树叶构件本来没有 Add()、Remove() 及 GetChild() 方法，却要实现它们（空实现或抛异常），这样会带来一些安全性问题。其结构图如图所示。</p> <p><img src="/design-pattern/assets/img/3-1Q1151G62L17.44c5f170.gif" alt=""></p> <h5 id="_2-安全方式"><a href="#_2-安全方式" class="header-anchor">#</a> (2) 安全方式</h5> <p>在该方式中，将管理子构件的方法移到树枝构件中，抽象构件和树叶构件没有对子对象的管理方法，这样就避免了上一种方式的安全性问题，但由于叶子和分支有不同的接口，客户端在调用时要知道树叶对象和树枝对象的存在，所以失去了透明性。其结构图如图所示。</p> <p><img src="/design-pattern/assets/img/3-1Q1151GF5221.410f9fcb.gif" alt=""></p> <h3 id="_2-模式的实现"><a href="#_2-模式的实现" class="header-anchor">#</a> 2. 模式的实现</h3> <p>假如要访问集合 c0={leaf1,{leaf2,leaf3}} 中的元素，其对应的树状图如图所示。</p> <p><img src="data:image/gif;base64,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" alt=""></p> <h5 id="透明组合模式"><a href="#透明组合模式" class="header-anchor">#</a> 透明组合模式</h5> <p>下面为透明式的组合模式的实现代码。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CompositePattern</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Component</span> c0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Component</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Component</span> leaf1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Component</span> leaf2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Component</span> leaf3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c0<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c0<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c0<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//抽象构件</span>
<span class="token keyword">interface</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Component</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Component</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//树叶构件</span>
<span class="token keyword">class</span> <span class="token class-name">Leaf</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Component</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Component</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;树叶&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;：被访问！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//树枝构件</span>
<span class="token keyword">class</span> <span class="token class-name">Composite</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span><span class="token punctuation">&gt;</span></span> children <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        children<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Component</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        children<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Component</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> children<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> obj <span class="token operator">:</span> children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">)</span> obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>程序运行结果如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>树叶1：被访问！
树叶2：被访问！
树叶3：被访问！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="安全组合模式"><a href="#安全组合模式" class="header-anchor">#</a> 安全组合模式</h5> <p>安全式的组合模式与透明式组合模式的实现代码类似，只要对其做简单修改就可以了，代码如下。</p> <p>首先修改 Component 代码，只保留层次的公共行为。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后修改客户端代码，将树枝构件类型更改为 Composite 类型，以便获取管理子类操作的方法。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class CompositePattern {
    public static void main(String[] args) {
        Composite c0 = new Composite();
        Composite c1 = new Composite();
        Component leaf1 = new Leaf(&quot;1&quot;);
        Component leaf2 = new Leaf(&quot;2&quot;);
        Component leaf3 = new Leaf(&quot;3&quot;);
        c0.add(leaf1);
        c0.add(c1);
        c1.add(leaf2);
        c1.add(leaf3);
        c0.operation();
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="组合模式的应用实例"><a href="#组合模式的应用实例" class="header-anchor">#</a> 组合模式的应用实例</h3> <p>【例1】用组合模式实现当用户在商店购物后，显示其所选商品信息，并计算所选商品总价的功能。</p> <p>说明：假如李先生到韶关“天街e角”生活用品店购物，用 1 个红色小袋子装了 2 包婺源特产（单价 7.9 元）、1 张婺源地图（单价 9.9 元）；用 1 个白色小袋子装了 2 包韶关香藉（单价 68 元）和 3 包韶关红茶（单价 180 元）；用 1 个中袋子装了前面的红色小袋子和 1 个景德镇瓷器（单价 380 元）；用 1 个大袋子装了前面的中袋子、白色小袋子和 1 双李宁牌运动鞋（单价 198 元）。</p> <p>最后“大袋子”中的内容有：{1 双李宁牌运动鞋（单价 198 元）、白色小袋子{2 包韶关香菇（单价 68 元）、3 包韶关红茶（单价 180 元）}、中袋子{1 个景德镇瓷器（单价 380 元）、红色小袋子{2 包婺源特产（单价 7.9 元）、1 张婺源地图（单价 9.9 元）}}}，现在要求编程显示李先生放在大袋子中的所有商品信息并计算要支付的总价。</p> <p>本实例可按安全组合模式设计，其结构图如图所示。</p> <p><img src="/design-pattern/assets/img/3-1Q1151G924356.6fd323dc.gif" alt=""></p> <p>程序代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">composite</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShoppingTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">float</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name">Bags</span> <span class="token class-name">BigBag</span><span class="token punctuation">,</span> mediumBag<span class="token punctuation">,</span> smallRedBag<span class="token punctuation">,</span> smallWhiteBag<span class="token punctuation">;</span>
        <span class="token class-name">Goods</span> sp<span class="token punctuation">;</span>
        <span class="token class-name">BigBag</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bags</span><span class="token punctuation">(</span><span class="token string">&quot;大袋子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediumBag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bags</span><span class="token punctuation">(</span><span class="token string">&quot;中袋子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        smallRedBag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bags</span><span class="token punctuation">(</span><span class="token string">&quot;红色小袋子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        smallWhiteBag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bags</span><span class="token punctuation">(</span><span class="token string">&quot;白色小袋子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;婺源特产&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7.9f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        smallRedBag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;婺源地图&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9.9f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        smallRedBag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;韶关香菇&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        smallWhiteBag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;韶关红茶&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        smallWhiteBag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;景德镇瓷器&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">380</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediumBag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediumBag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>smallRedBag<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token string">&quot;李宁牌运动鞋&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">198</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigBag</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigBag</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>smallWhiteBag<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigBag</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mediumBag<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;您选购的商品有：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigBag</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s <span class="token operator">=</span> <span class="token class-name">BigBag</span><span class="token punctuation">.</span><span class="token function">calculation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;要支付的总价是：&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;元&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//抽象构件：物品</span>
<span class="token keyword">interface</span> <span class="token class-name">Articles</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">calculation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//计算</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//树叶构件：商品</span>
<span class="token keyword">class</span> <span class="token class-name">Goods</span> <span class="token keyword">implements</span> <span class="token class-name">Articles</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>     <span class="token comment">//名字</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> quantity<span class="token punctuation">;</span>    <span class="token comment">//数量</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> unitPrice<span class="token punctuation">;</span> <span class="token comment">//单价</span>
    <span class="token keyword">public</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> quantity<span class="token punctuation">,</span> <span class="token keyword">float</span> unitPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>quantity <span class="token operator">=</span> quantity<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>unitPrice <span class="token operator">=</span> unitPrice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">calculation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> quantity <span class="token operator">*</span> unitPrice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;(数量：&quot;</span> <span class="token operator">+</span> quantity <span class="token operator">+</span> <span class="token string">&quot;，单价：&quot;</span> <span class="token operator">+</span> unitPrice <span class="token operator">+</span> <span class="token string">&quot;元)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//树枝构件：袋子</span>
<span class="token keyword">class</span> <span class="token class-name">Bags</span> <span class="token keyword">implements</span> <span class="token class-name">Articles</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>     <span class="token comment">//名字  </span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Articles</span><span class="token punctuation">&gt;</span></span> bags <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Articles</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Bags</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Articles</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bags<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Articles</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bags<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Articles</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bags<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">calculation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">float</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> obj <span class="token operator">:</span> bags<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            s <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Articles</span><span class="token punctuation">)</span> obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">calculation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> obj <span class="token operator">:</span> bags<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Articles</span><span class="token punctuation">)</span> obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><p>程序运行结果如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>您选购的商品有：
李宁牌运动鞋(数量：1，单价：198.0元)
韶关香菇(数量：2，单价：68.0元)
韶关红茶(数量：3，单价：180.0元)
景德镇瓷器(数量：1，单价：380.0元)
婺源特产(数量：2，单价：7.9元)
婺源地图(数量：1，单价：9.9元)
要支付的总价是：1279.7元
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="组合模式的应用场景"><a href="#组合模式的应用场景" class="header-anchor">#</a> 组合模式的应用场景</h3> <p>前面分析了组合模式的结构与特点，下面分析它适用的以下应用场景。</p> <ul><li>在需要表示一个对象整体与部分的层次结构的场合。</li> <li>要求对用户隐藏组合对象与单个对象的不同，用户可以用统一的接口使用组合结构中的所有对象的场合。</li></ul> <h3 id="组合模式的扩展"><a href="#组合模式的扩展" class="header-anchor">#</a> 组合模式的扩展</h3> <p>如果对前面介绍的组合模式中的树叶节点和树枝节点进行抽象，也就是说树叶节点和树枝节点还有子节点，这时组合模式就扩展成复杂的组合模式了，如 Java AWT/Swing 中的简单组件 JTextComponent 有子类 JTextField、JTextArea，容器组件 Container 也有子类 Window、Panel。复杂的组合模式的结构图如图所示。</p> <p><img src="/design-pattern/assets/img/3-1Q1151H632613.8d3718e3.gif" alt=""></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/27/2022, 2:48:22 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design-pattern/设计模式/23-享元模式.html" class="prev">
        享元模式
      </a></span> <span class="next"><a href="/design-pattern/设计模式/25-结构型模式应用实验.html">
        结构型模式应用实验
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/design-pattern/assets/js/app.8c81fd22.js" defer></script><script src="/design-pattern/assets/js/2.dd66b6b4.js" defer></script><script src="/design-pattern/assets/js/7.83b1ace1.js" defer></script>
  </body>
</html>
